(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,s){},21:function(e,t,s){e.exports=s(41)},30:function(e,t,s){},32:function(e,t,s){},35:function(e,t,s){},37:function(e,t,s){},39:function(e,t,s){},41:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),i=s(18),o=s.n(i),r=s(5),p=s(9),c=s(1),l={CLEAR_LEVEL:"CLEAR_LEVEL",PROMPT:"PROMPT",UPDATE_SHIP:"UPDATE_SHIP",UPDATE_PLANETS:"UPDATE_PLANETS",INCREMENT_CLOCK:"INCREMENT_CLOCK",SELECT_LEVEL:"SELECT_LEVEL",UNSET_GAME:"UNSET_GAME",RESET_GAME:"RESET_GAME",START_GAME:"START_GAME",STOP_GAME:"STOP_GAME"},u=[{level:1,ship:{mass:1,radius:5,rotation:-270,posX:250,posY:150,aX:0,aY:0,vX:0,vY:0},planets:[{type:"goal",mass:2e4,posX:250,posY:250}]},{level:2,ship:{mass:1,radius:5,rotation:-270,posX:250,posY:150,aX:0,aY:0,vX:0,vY:0},planets:[{type:"goal",mass:1e4,posX:200,posY:100},{type:"void",mass:15e3,posX:250,posY:250}]},{level:3,ship:{mass:1,radius:5,rotation:-270,posX:250,posY:150,aX:0,aY:0,vX:0,vY:0},planets:[{type:"void",mass:1e4,posX:200,posY:100},{type:"void",mass:15e3,posX:250,posY:250},{type:"goal",mass:25e3,posX:250,posY:350}]}],h={ship:Object(c.a)({},u[0].ship),planets:Object(c.a)({},u[0].planets)},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.UPDATE_SHIP:return Object(c.a)({},e,{ship:Object(c.a)({},e.ship,t.ship)});case l.UPDATE_PLANETS:return Object(c.a)({},e,{planets:Object(c.a)({},t.planets)});default:return e}},m=s(20),d={gameActive:!1,reset:!1,clock:0,level:0,levelsCleared:[],message:null},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.CLEAR_LEVEL:var s=Object(m.a)(e.levelsCleared);return e.levelsCleared.includes(t.level)||(s=e.levelsCleared.concat([t.level])),Object(c.a)({},e,{levelsCleared:s});case l.PROMPT:return Object(c.a)({},e,{message:t.message});case l.INCREMENT_CLOCK:return Object(c.a)({},e,{clock:e.clock+1});case l.UNSET_GAME:return Object(c.a)({},e,{reset:!1});case l.RESET_GAME:return Object(c.a)({},e,{gameActive:!1,reset:!0,clock:0,message:null});case l.SELECT_LEVEL:return Object(c.a)({},e,{level:t.level});case l.START_GAME:return Object(c.a)({},e,{gameActive:!0});case l.STOP_GAME:return Object(c.a)({},e,{gameActive:!1});default:return e}},g=Object(p.b)({game:E,space:v});s(30);var f=s(11),b=s(2),O=s(3),S=s(6),X=s(4),A=s(7),y=function(e){return{type:l.UPDATE_SHIP,ship:e}},T=function(){return{type:l.UNSET_GAME}},Y=function(){return{type:l.RESET_GAME}},_=(s(32),s(17),function(e){return e/1e3}),j=(s(35),function(e){function t(){return Object(b.a)(this,t),Object(S.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=_(this.props.data.mass),t={left:this.props.data.posX,top:this.props.data.posY},s={width:2*e,height:2*e,borderRadius:2*e},a=Object(c.a)({},s,t);return n.a.createElement("div",{className:"massive-object ".concat("goal"===this.props.data.type?"green":""),style:a})}}]),t}(n.a.Component)),L=(s(37),function(e){function t(e){var s;return Object(b.a)(this,t),(s=Object(S.a)(this,Object(X.a)(t).call(this,e))).state={dragging:!1,button:0,iX:s.props.ship.posX,iY:s.props.ship.posY,posX:s.props.ship.posX,posY:s.props.ship.posY,relX:0,relY:0,iVX:0,iVY:0},s}return Object(A.a)(t,e),Object(O.a)(t,[{key:"componentDidUpdate",value:function(e,t){var s=this;this.state.dragging&&!t.dragging?(document.addEventListener("mousemove",function(e){return s.onMouseMove(e)}),document.addEventListener("mouseup",function(e){return s.onMouseUp(e)})):!this.state.dragging&&t.dragging&&(document.removeEventListener("mousemove",function(e){return s.onMouseMove(e)}),document.removeEventListener("mouseup",function(e){return s.onMouseUp(e)})),e.reset&&this.setState({iX:this.props.ship.posX,iY:this.props.ship.posY,posX:this.props.ship.posX,posY:this.props.ship.posY})}},{key:"onMouseDown",value:function(e){var t=document.getElementById("ship").offsetLeft,s=document.getElementById("ship").offsetTop;0!==e.button&&1!==e.button||this.setState({dragging:!0,button:e.button,relX:e.pageX-t,relY:e.pageY-s}),e.stopPropagation(),e.preventDefault()}},{key:"onMouseUp",value:function(e){this.setState({dragging:!1,iX:this.state.posX,iY:this.state.posY}),e.stopPropagation(),e.preventDefault()}},{key:"onMouseMove",value:function(e){var t=this;if(this.state.dragging&&!this.props.gameActive){var s=this.state.relX,a=this.state.relY;1===this.state.button&&this.setState({vX:e.pageX-s+this.props.ship.radius,vY:e.pageY-a+this.props.ship.radius},function(){t.props.updateShip({vX:t.state.vX,vY:t.state.vY})}),0===this.state.button&&this.setState({posX:e.pageX-s+this.state.iX+this.props.ship.radius,posY:e.pageY-a+this.state.iY+this.props.ship.radius},function(){t.props.updateShip({posX:t.state.posX,posY:t.state.posY})}),e.stopPropagation(),e.preventDefault()}}},{key:"render",value:function(){var e=this,t=Math.sqrt(Math.pow(this.props.ship.vX,2)+Math.pow(this.props.ship.vY,2)),s=180*-Math.atan2(this.props.ship.vX,this.props.ship.vY)/Math.PI-270,a={width:t,transform:"rotate(".concat(s,"deg)")},i={transform:"translate3d(".concat(this.props.ship.posX,"px, ").concat(this.props.ship.posY,"px, 0)")},o={transform:"rotate(".concat(s+90,"deg)")},r=Object(c.a)({},i);return n.a.createElement("div",{id:"ship",className:"ship",style:r,onMouseDown:function(t){e.onMouseDown(t)}},n.a.createElement("div",{className:"ship-image",style:o}),!this.props.gameActive&&n.a.createElement("div",{className:"velocity-vector",style:a}))}}]),t}(n.a.Component)),M=Object(r.b)(function(e){return{ship:e.space.ship,planets:e.space.planets,gameActive:e.game.gameActive}},function(e){return{updateShip:function(t){return e(y(t))}}})(L),k=(s(39),function(e){function t(e){var s;return Object(b.a)(this,t),(s=Object(S.a)(this,Object(X.a)(t).call(this,e))).removeEvent=!1,s}return Object(A.a)(t,e),Object(O.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.level!==e.level&&this.setState({ship:u[this.props.level].ship,planets:u[this.props.level].planets}),this.props.reset&&(this.props.unsetGame(),this.props.updateShip(u[this.props.level].ship),this.props.updatePlanets(u[this.props.level].planets)),this.props.clock>e.clock&&this.calculateShipAcceleration()}},{key:"calculateShipAcceleration",value:function(){for(var e=this,t=this.props.interval/1e3,s=0,a=0,n=this.props.ship.vX,i=this.props.ship.vY,o=0,r=0,p=Object.values(this.props.planets),c=0;c<p.length;c++){var l=p[c],u=l.posX-this.props.ship.posX,h=l.posY-this.props.ship.posY,v=Math.sqrt(u*u+h*h);if(v<=_(l.mass)+2*this.props.ship.radius-2){n=0,i=0,o=0,r=0,"goal"===l.type?(null===this.props.message&&this.props.prompt("Success"),setTimeout(function(){e.props.clearLevel(e.props.level),e.props.resetGame()},1500)):(null===this.props.message&&this.props.prompt("Fail"),setTimeout(function(){e.props.resetGame()},1500));break}var m=30*l.mass/(v*v);o+=m*u/v,r+=m*h/v}s+=n*t+.5*o*t*t,a+=i*t+.5*r*t*t,n+=o*t,i+=r*t,this.props.updateShip({aX:o,aY:r,vX:n,vY:i,posX:this.props.ship.posX+s,posY:this.props.ship.posY+a})}},{key:"updateShipPosition",value:function(e,t){this.props.updateShip({posX:e,posY:t})}},{key:"renderPlanets",value:function(e,t){return n.a.createElement(j,{key:"level_"+String(this.props.level)+"_planet_"+String(t),data:e})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"space",className:"space-container"},Object.values(this.props.planets).map(function(t,s){return e.renderPlanets(t,s)}),n.a.createElement(M,{data:this.props.ship,reset:this.props.reset,updateInitialVelocity:function(t,s){e.updateInitialVelocity(t,s)},updateShipPosition:function(t,s){e.updateShipPosition(t,s)}}))}}]),t}(n.a.Component)),P=Object(r.b)(function(e){return{clock:e.game.clock,ship:e.space.ship,planets:e.space.planets,level:e.game.level,reset:e.game.reset,message:e.game.message}},function(e){return{clearLevel:function(t){return e(function(e){return{type:l.CLEAR_LEVEL,level:e}}(t))},prompt:function(t){return e(function(e){return{type:l.PROMPT,message:e}}(t))},updateShip:function(t){return e(y(t))},updatePlanets:function(t){return e({type:l.UPDATE_PLANETS,planets:t})},resetGame:function(){return e(Y())},unsetGame:function(){return e(T())}}})(k),C=30,N=function(e){function t(e){var s;return Object(b.a)(this,t),(s=Object(S.a)(this,Object(X.a)(t).call(this,e))).timer=-1,s.interval=1e3/C,s}return Object(A.a)(t,e),Object(O.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;this.props.reset&&this.props.gameActive&&(this.props.stopGame(),clearInterval(this.timer)),this.props.gameActive&&-1===this.timer&&(this.timer=setInterval(function(){e.props.incrementClock()},this.interval)),this.props.gameActive||-1===this.timer||(clearInterval(this.timer),this.timer=-1)}},{key:"toggleGame",value:function(){this.props.gameActive?this.props.stopGame():this.props.startGame()}},{key:"selectLevel",value:function(e){this.props.selectLevel(e),this.props.resetGame()}},{key:"handleInput",value:function(e){this.setState(Object(f.a)({},e.target.name,Number(e.target.value)))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"page-container"},n.a.createElement("span",null," Drag with left click to move the spaceship"),n.a.createElement("span",null," Drag with middle click to set initial velocity"),n.a.createElement("span",null," Press start to simulate orbit "),n.a.createElement(P,{interval:this.interval}),null!==this.props.message&&n.a.createElement("div",{className:"game-prompt ".concat("Fail"===this.props.message?"red-font":"green-font")},this.props.message),n.a.createElement("div",{className:"controls"},n.a.createElement("div",{className:"button",onClick:function(){return e.toggleGame()}},this.props.gameActive?"Pause":"Start"," "),n.a.createElement("div",{className:"button",onClick:function(){return e.props.resetGame()}},"reset")),n.a.createElement("div",{className:"level-select"},u.map(function(t,s){return n.a.createElement("div",{key:"level"+s,className:"button ".concat(e.props.levelsCleared.includes(s)?"green":""),onClick:function(){e.selectLevel(s)}},"Level ",s+1)})))}}]),t}(a.Component),G=Object(r.b)(function(e){return{gameActive:e.game.gameActive,reset:e.game.reset,clock:e.game.clock,level:e.game.level,levelsCleared:e.game.levelsCleared,message:e.game.message}},function(e){return{incrementClock:function(){return e({type:l.INCREMENT_CLOCK,clock:t});var t},resetGame:function(){return e(Y())},unsetGame:function(){return e(T())},startGame:function(){return e({type:l.START_GAME})},stopGame:function(){return e({type:l.STOP_GAME})},selectLevel:function(t){return e(function(e){return{type:l.SELECT_LEVEL,level:e}}(t))}}})(N);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=Object(p.c)(g,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(n.a.createElement(r.a,{store:w},n.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,2,1]]]);
//# sourceMappingURL=main.c1bea59e.chunk.js.map